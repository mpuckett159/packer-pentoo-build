{
    "provisioners": [],
    "builders": [
        {
            "type": "virtualbox-iso",
            "floppy_files": ["pentoo-install-config.json"],
            "virtualbox_version_file": "",
            "guest_additions_mode": "disable",
            "boot_keygroup_interval": "500ms",
            "boot_command": [
                "{{user `LIVECD_PASSWORD` }}<wait100ms><enter><wait1s>{{user `LIVECD_PASSWORD` }}<wait100ms><enter><wait1s>",
                "sudo dhcpcd eth0<wait100ms><enter><wait15s>",
                "sudo mkdir /mnt/floppy<wait100ms><enter>",
                "sudo chmod 777 /mnt/floppy<wait100ms><enter>",
                "sudo mount /dev/fd0 /mnt/floppy<wait100ms><enter><wait2s>",
                "sudo pentoo-installer --headless --config-file /mnt/floppy/pentoo-install-config.json<wait100ms><enter><wait20m>"
            ],
            "vboxmanage": [
                [
                    "modifyvm",
                    "{{.Name}}",
                    "--nic1",
                    "nat"
                ]
            ],
            "boot_wait": "2m",
            "cpus": 1,
            "memory": 4096,
            "disk_size": 61440,
            "guest_os_type": "other3xlinux-64",
            "headless": "false",
            "iso_url": "{{user `ISO_PATH` }}",
            "iso_checksum": "{{ user `ISO_CHECKSUM` }}",
            "communicator": "none",
            "vm_name": "pentoo-packer-build-vbx",
            "format": "ova",
            "output_directory": "{{user `OUTPUT_DIR`}}"
        }
    ],
    "post-processors": [
        {
            "type": "amazon-import",
            "access_key": "{{user `AWS_ACCESSKEY` }}",
            "secret_key": "{{user `AWS_SECRETKEY` }}",
            "region": "us-west-2",
            "s3_bucket_name": "packer-test-ova-ami-conversion",
            "license_type": "BYOL",
            "tags": {
              "Description": "packer"
            }
        }
    ]
}